"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8881],{2854:(e,t,a)=>{a.d(t,{$s:()=>i,K7:()=>o,bW:()=>l,st:()=>r,zZ:()=>n});let s="http://localhost:8181/api",l=async(e,t,a,l,i)=>(await fetch(s+"/news-category?search=".concat(e,"&page=").concat(t,"&limit=").concat(a,"&sortColumn=").concat(l,"&sortOrder=").concat(i),{credentials:"include"})).json(),i=async e=>(await fetch("".concat(s,"/news-category/").concat(e),{credentials:"include"})).json(),n=async e=>{let t=new FormData;return t.append("name",e.name),t.append("order",e.order),t.append("description",e.description),(await fetch("".concat(s,"/news-category/create"),{method:"POST",credentials:"include",body:t})).json()},r=async(e,t)=>{let a=new FormData;return a.append("name",t.name),a.append("order",t.order),a.append("description",t.description),(await fetch("".concat(s,"/news-category/update/").concat(e),{method:"PUT",credentials:"include",body:a})).json()},o=async e=>(await fetch("".concat(s,"/news-category/delete/").concat(e),{method:"DELETE",credentials:"include"})).json()},5626:(e,t,a)=>{a.d(t,{Q4:()=>n,U5:()=>i,aE:()=>l,rD:()=>o,zG:()=>r});let s="http://localhost:8181/api",l=async(e,t,a,l,i)=>(await fetch(s+"/news?search=".concat(e,"&page=").concat(t,"&limit=").concat(a,"&sortColumn=").concat(l,"&sortOrder=").concat(i),{credentials:"include"})).json(),i=async e=>(await fetch("".concat(s,"/news/").concat(e),{credentials:"include"})).json(),n=async e=>{let t=new FormData;return t.append("name",e.name),t.append("title",e.title),e.categories.forEach(e=>{t.append("categories",e)}),t.append("order",e.order),t.append("description",e.description),t.append("metaTitle",e.metaTitle),t.append("metaDescription",e.metaDescription),e.profilePhoto&&e.profilePhoto.length>0&&t.append("file",e.profilePhoto[0]),(await fetch("".concat(s,"/news/create"),{method:"POST",credentials:"include",body:t})).json()},r=async(e,t)=>{let a=new FormData;return a.append("name",t.name),a.append("title",t.title),t.categories.forEach(e=>{a.append("categories",e)}),a.append("order",t.order),a.append("slug",t.slug),a.append("description",t.description),a.append("metaTitle",t.metaTitle),a.append("metaDescription",t.metaDescription),t.profilePhoto&&t.profilePhoto.length>0&&a.append("file",t.profilePhoto[0]),(await fetch("".concat(s,"/news/update/").concat(e),{method:"PUT",credentials:"include",body:a})).json()},o=async e=>(await fetch("".concat(s,"/news/delete/").concat(e),{method:"DELETE",credentials:"include"})).json()},6273:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(5155),l=a(2115);let i="http://localhost:8181/api";function n(e){let{value:t,onChange:a}=e,n=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=(e,t)=>new Promise((a,s)=>{let l=new XMLHttpRequest;l.withCredentials=!0,l.open("POST",i+"/upload_image"),l.upload.onprogress=e=>{t(e.loaded/e.total*100)},l.onload=()=>{if(403===l.status){s({message:"HTTP Error: "+l.status,remove:!0});return}if(l.status<200||l.status>=300){s("HTTP Error: "+l.status);return}let e=JSON.parse(l.responseText);if(!e||"string"!=typeof e.location){s("Invalid JSON: "+l.responseText);return}a("http://localhost:8181/"+e.location)},l.onerror=()=>{s("Image upload failed due to a XHR Transport error. Code: "+l.status)};let n=new FormData;n.append("file",e.blob(),e.filename()),l.send(n)}),t=document.createElement("script");return t.src="/assets/js/vendor/tinymce/tinymce.min.js",t.referrerPolicy="origin",t.onload=()=>{window.tinymce.init({selector:"#editor",height:400,menubar:!0,plugins:"code advlist autolink lists link image charmap preview anchor",toolbar:"undo redo | formatselect | bold italic | alignleft aligncenter alignright alignjustify | outdent indent | code",extended_valid_elements:"script[src|async|defer|type|charset]",valid_children:"+body[script]",valid_elements:"*[*]",content_css:"/assets/css/bootstrap.min.css,/assets/css/custom.css,/assets/css/responsive.css,/assets/css/extra.css",allow_script_urls:!0,images_upload_url:i+"/upload_image",images_upload_handler:e,setup:e=>{e.on("change",()=>a(e.getContent()))}})},document.body.appendChild(t),()=>{window.tinymce&&window.tinymce.remove()}},[a]),(0,s.jsx)("textarea",{id:"editor",ref:n,defaultValue:t})}},9716:(e,t,a)=>{a.d(t,{A:()=>p});var s=a(5155),l=a(2115),i=a(2177),n=a(2051),r=a(2854),o=a(6874),c=a.n(o),d=a(6273),m=a(5799);let p=e=>{var t,a,o,p,u,h,g,v,f,x,b,j,N,w,y,T;let{initialData:S,onSubmit:D,isSubmitting:P}=e,{register:E,handleSubmit:_,setError:C,control:q,reset:F,getValues:M,setValue:O,formState:{errors:I}}=(0,i.mN)({defaultValues:S||{name:"",categories:"",title:"",profilePhoto:null,image:"",order:"0",slug:"",description:"",metaTitle:"",metaDescription:""}}),[L,k]=(0,l.useState)(""),[A,R]=(0,l.useState)(null),[U,H]=(0,l.useState)([]);return(0,l.useEffect)(()=>{(0,r.bW)(1,1e3).then(e=>{e.error?m.oR.error(e.error):e.data&&e.data.length>0?H(e.data.map(e=>({value:e._id,label:e.name}))):C("categories",{type:"manual",message:"No categories were added in News type"})})},[]),(0,l.useEffect)(()=>{O("description",L)},[L]),(0,l.useEffect)(()=>{S&&S.description&&k(S.description)},[]),(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("form",{onSubmit:_(e=>{D(e)}),encType:"multipart/form-data",children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"categories",className:"form-label",children:"Category *"}),U.length>0&&(0,s.jsx)(i.xI,{name:"categories",control:q,rules:{required:"category is required"},render:e=>{let{field:t}=e;return(0,s.jsx)(n.Ay,{...t,options:U,isMulti:!0,isClearable:!0,value:U.filter(e=>{var a;return null===(a=t.value)||void 0===a?void 0:a.includes(e.value)}),onChange:e=>t.onChange(e.map(e=>e.value)),isLoading:!U.length,placeholder:"Select Categories"})}}),I.categories&&(0,s.jsx)("small",{className:"text-danger",children:null===(a=I.categories)||void 0===a?void 0:null===(t=a.message)||void 0===t?void 0:t.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"name",className:"form-label",children:"Author *"}),(0,s.jsx)("input",{type:"text",className:"form-control",...E("name",{required:"Author is required",minLength:{value:3,message:"Must be at least 3 characters"}})}),I.name&&(0,s.jsx)("small",{className:"text-danger",children:null===(p=I.name)||void 0===p?void 0:null===(o=p.message)||void 0===o?void 0:o.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title *"}),(0,s.jsx)("input",{type:"text",className:"form-control",...E("title",{required:"Title is required",minLength:{value:3,message:"Must be at least 3 characters"}})}),I.title&&(0,s.jsx)("small",{className:"text-danger",children:null===(h=I.title)||void 0===h?void 0:null===(u=h.message)||void 0===u?void 0:u.toString()})]}),S&&""!==S.slug&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"title",className:"form-label",children:"Slug *"}),(0,s.jsx)("input",{type:"text",className:"form-control",...E("slug",{})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"image",className:"form-label",children:"Image *"}),(0,s.jsxs)("div",{className:"btn-main-box",children:[(0,s.jsx)("input",{type:"file",className:"file-input",...E("profilePhoto",{required:!A&&(null==S||!S.image)&&"Image is required"}),onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&R(URL.createObjectURL(a))}}),(0,s.jsx)("div",{className:"btn-box",children:"Upload Image"})]}),A&&(0,s.jsx)("img",{src:A,alt:"Image Preview",className:"mt-3",width:100}),!A&&S&&S.image&&(0,s.jsx)("img",{src:"http://localhost:8181/"+S.image,alt:"Image Preview",className:"mt-3",width:100}),!A&&I.profilePhoto&&(0,s.jsx)("small",{className:"text-danger",children:null===(v=I.profilePhoto)||void 0===v?void 0:null===(g=v.message)||void 0===g?void 0:g.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Description"}),(0,s.jsx)(d.A,{value:M("description"),onChange:k}),I.description&&(0,s.jsx)("small",{className:"text-danger",children:null===(x=I.description)||void 0===x?void 0:null===(f=x.message)||void 0===f?void 0:f.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Order"}),(0,s.jsx)("input",{type:"number",min:"0",className:"form-control",...E("order",{})}),I.order&&(0,s.jsx)("small",{className:"text-danger",children:null===(j=I.order)||void 0===j?void 0:null===(b=j.message)||void 0===b?void 0:b.toString()})]}),(0,s.jsx)("div",{className:"row mb-3",children:(0,s.jsxs)("div",{className:"col-md-12",children:[(0,s.jsx)("label",{htmlFor:"metaTitle",className:"form-label",children:"Meta Title *"}),(0,s.jsx)("input",{type:"text",className:"form-control",placeholder:"Meta Title",...E("metaTitle",{required:"Meta Title is required."})}),I.metaTitle&&(0,s.jsx)("p",{className:"text-red-500",children:null===(w=I.metaTitle)||void 0===w?void 0:null===(N=w.message)||void 0===N?void 0:N.toString()})]})}),(0,s.jsx)("div",{className:"row mb-3",children:(0,s.jsxs)("div",{className:"col-md-12",children:[(0,s.jsx)("label",{htmlFor:"metaDescription",className:"form-label",children:"Meta Description *"}),(0,s.jsx)("textarea",{className:"form-control",placeholder:"Meta Description",...E("metaDescription",{required:"Meta Description is required."})}),I.metaDescription&&(0,s.jsx)("p",{className:"text-red-500",children:null===(T=I.metaDescription)||void 0===T?void 0:null===(y=T.message)||void 0===y?void 0:y.toString()})]})}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:P,children:P?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save"}),(0,s.jsx)(c(),{className:"btn btn-outline-secondary ml-2",href:"/admin/news/",children:"Cancel"})]})})}}}]);