"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9111],{2953:(e,t,a)=>{a.d(t,{GW:()=>o,aN:()=>s,fI:()=>n,r$:()=>r,t1:()=>l});let i="http://localhost:8181/api",l=async(e,t,a,l,s)=>(await fetch(i+"/testimonials?search=".concat(e,"&page=").concat(t,"&limit=").concat(a,"&sortColumn=").concat(l,"&sortOrder=").concat(s),{credentials:"include"})).json(),s=async e=>(await fetch("".concat(i,"/testimonials/").concat(e),{credentials:"include"})).json(),o=async e=>{let t=new FormData;return t.append("title",e.title),t.append("description",e.description),e.categories.forEach(e=>{t.append("categories",e)}),t.append("type",e.type),t.append("order",e.order),"image"==e.type&&e.testimonialPhoto&&e.testimonialPhoto.length>0&&t.append("file",e.testimonialPhoto[0]),"video"==e.type&&(e.testimonialVideo&&e.testimonialVideo.length>0&&t.append("video",e.testimonialVideo[0]),e.testimonialVideoPoster&&e.testimonialVideoPoster.length>0&&t.append("videoPoster",e.testimonialVideoPoster[0])),(await fetch("".concat(i,"/testimonials/create"),{method:"POST",credentials:"include",body:t})).json()},n=async(e,t)=>{let a=new FormData;return a.append("title",t.title),a.append("description",t.description),t.categories.forEach(e=>{a.append("categories",e)}),a.append("type",t.type),a.append("order",t.order),a.append("slug",t.slug),"image"==t.type&&t.testimonialPhoto&&t.testimonialPhoto.length>0&&a.append("file",t.testimonialPhoto[0]),"video"==t.type&&(t.testimonialVideo&&t.testimonialVideo.length>0&&a.append("video",t.testimonialVideo[0]),t.testimonialVideoPoster&&t.testimonialVideoPoster.length>0&&a.append("videoPoster",t.testimonialVideoPoster[0])),(await fetch("".concat(i,"/testimonials/update/").concat(e),{method:"PUT",credentials:"include",body:a})).json()},r=async e=>(await fetch("".concat(i,"/testimonials/delete/").concat(e),{method:"DELETE",credentials:"include"})).json()},4124:(e,t,a)=>{a.d(t,{$s:()=>s,K7:()=>r,bW:()=>l,st:()=>n,zZ:()=>o});let i="http://localhost:8181/api",l=async(e,t,a,l,s)=>(await fetch(i+"/testimonial-category?search=".concat(e,"&page=").concat(t,"&limit=").concat(a,"&sortColumn=").concat(l,"&sortOrder=").concat(s),{credentials:"include"})).json(),s=async e=>(await fetch("".concat(i,"/testimonial-category/").concat(e),{credentials:"include"})).json(),o=async e=>{let t=new FormData;return t.append("name",e.name),t.append("order",e.order),t.append("description",e.description),(await fetch("".concat(i,"/testimonial-category/create"),{method:"POST",credentials:"include",body:t})).json()},n=async(e,t)=>{let a=new FormData;return a.append("name",t.name),a.append("order",t.order),a.append("description",t.description),(await fetch("".concat(i,"/testimonial-category/update/").concat(e),{method:"PUT",credentials:"include",body:a})).json()},r=async e=>(await fetch("".concat(i,"/testimonial-category/delete/").concat(e),{method:"DELETE",credentials:"include"})).json()},6263:(e,t,a)=>{a.d(t,{A:()=>p});var i=a(5155),l=a(2115),s=a(2177),o=a(2051),n=a(4124),r=a(6874),d=a.n(r),c=a(5799);let m=[{value:"image",label:"Image"},{value:"video",label:"Video"}],u="http://localhost:8181",p=e=>{var t,a,r,p,h,v,g,x,j,b,N,y,f,P,w,V;let{initialData:S,onSubmit:C,isSubmitting:q}=e,{register:T,handleSubmit:E,setError:I,control:F,reset:U,formState:{errors:L}}=(0,s.mN)({defaultValues:S||{title:"",type:"",categories:[],testimonialPhoto:null,testimonialVideo:null,testimonialVideoPoster:null,image:"",order:"0",slug:"",description:""}}),[D,O]=(0,l.useState)(null),[R,_]=(0,l.useState)(null),[k,A]=(0,l.useState)(null),[W,M]=(0,l.useState)([]),[$,z]=(0,l.useState)((null==S?void 0:S.type)||"image");(0,l.useEffect)(()=>{(0,n.bW)(1,1e3).then(e=>{e.error?c.oR.error(e.error):e.data&&e.data.length>0?M(e.data.map(e=>({value:e._id,label:e.name}))):I("categories",{type:"manual",message:"No categories were added in testimonial type"})})},[]);let G=e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){let t=e.target.name,i=URL.createObjectURL(a);"testimonialPhoto"==t&&O(i),"testimonialVideoPoster"==t&&A(i)}},K=e=>t=>{var a;e(null!==(a=null==t?void 0:t.value)&&void 0!==a?a:null),z(null==t?void 0:t.value)};return(0,i.jsx)("div",{className:"",children:(0,i.jsxs)("form",{onSubmit:E(e=>{C(e)}),encType:"multipart/form-data",children:[(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{htmlFor:"categories",className:"form-label",children:"Category *"}),W.length>0&&(0,i.jsx)(s.xI,{name:"categories",control:F,rules:{required:"category is required"},render:e=>{let{field:t}=e;return(0,i.jsx)(o.Ay,{...t,options:W,isMulti:!0,isClearable:!0,value:W.filter(e=>{var a;return null===(a=t.value)||void 0===a?void 0:a.includes(e.value)}),onChange:e=>t.onChange(e.map(e=>e.value)),isLoading:!W.length,placeholder:"Select Categories"})}}),L.categories&&(0,i.jsx)("small",{className:"text-danger",children:null===(a=L.categories)||void 0===a?void 0:null===(t=a.message)||void 0===t?void 0:t.toString()})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title *"}),(0,i.jsx)("input",{type:"text",className:"form-control",...T("title",{required:"Title is required",minLength:{value:3,message:"Must be at least 3 characters"}})}),L.title&&(0,i.jsx)("small",{className:"text-danger",children:null===(p=L.title)||void 0===p?void 0:null===(r=p.message)||void 0===r?void 0:r.toString()})]}),S&&""!==S.slug&&(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{htmlFor:"slug",className:"form-label",children:"Slug *"}),(0,i.jsx)("input",{type:"text",className:"form-control",...T("slug",{})})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{htmlFor:"type",className:"form-label",children:"Type *"}),(0,i.jsx)(s.xI,{name:"type",control:F,rules:{required:"Type is required"},render:e=>{let{field:t}=e;return(0,i.jsx)(o.Ay,{...t,options:m,value:m.find(e=>e.value===t.value)||null,onChange:K(t.onChange),placeholder:"Select Type"})}}),L.type&&(0,i.jsx)("small",{className:"text-danger",children:null===(v=L.type)||void 0===v?void 0:null===(h=v.message)||void 0===h?void 0:h.toString()})]}),"image"==$&&(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{htmlFor:"testimonialPhoto",className:"form-label",children:"Image *"}),(0,i.jsxs)("div",{className:"btn-main-box",children:[(0,i.jsx)("input",{type:"file",className:"file-input",...T("testimonialPhoto",{required:!D&&(null==S||!S.image)&&"Image is required"}),onChange:G}),(0,i.jsx)("div",{className:"btn-box",children:"Upload Image"})]}),D&&(0,i.jsx)("img",{src:D,alt:"Image Preview",className:"mt-3",width:100}),!D&&S&&S.image&&(0,i.jsx)("img",{src:u+"/"+S.image,alt:"Image Preview",className:"mt-3",width:100}),!D&&L.testimonialPhoto&&(0,i.jsx)("small",{className:"text-danger",children:null===(x=L.testimonialPhoto)||void 0===x?void 0:null===(g=x.message)||void 0===g?void 0:g.toString()})]}),(0,i.jsxs)("div",{className:"row",children:["video"==$&&(0,i.jsxs)("div",{className:"mb-3 col-md-4",children:[(0,i.jsx)("label",{className:"form-label",children:"Video"}),(0,i.jsxs)("div",{className:"btn-main-box",children:[(0,i.jsx)("input",{type:"file",className:"file-input",accept:"video/*",...T("testimonialVideo",{required:!R&&(null==S||!S.video)&&"Video is required"}),onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&_(URL.createObjectURL(a))}}),(0,i.jsx)("div",{className:"btn-box",children:"Upload Video"})]}),R&&(0,i.jsx)("div",{className:"video-preview mt-3",children:(0,i.jsx)("video",{src:R,controls:!0,width:320,height:240,className:"rounded shadow-md"})}),!R&&S&&S.video&&(0,i.jsx)("div",{className:"video-preview mt-3",children:(0,i.jsx)("video",{src:u+"/"+S.video,controls:!0,width:320,height:240,className:"rounded shadow-md"})}),!R&&L.testimonialVideo&&(0,i.jsx)("small",{className:"text-danger",children:null===(b=L.testimonialVideo)||void 0===b?void 0:null===(j=b.message)||void 0===j?void 0:j.toString()})]}),"video"==$&&(0,i.jsxs)("div",{className:"mb-3 col-md-4",children:[(0,i.jsx)("label",{className:"form-label",children:"Poster Image"}),(0,i.jsxs)("div",{className:"btn-main-box",children:[(0,i.jsx)("input",{type:"file",className:"file-input",...T("testimonialVideoPoster",{required:!k&&(null==S||!S.videoPoster)&&"Poster is required"}),onChange:G}),(0,i.jsx)("div",{className:"btn-box",children:"Upload Image"})]}),k&&(0,i.jsx)("img",{src:k,alt:"Poster Preview",className:"mt-3",width:100}),!k&&S&&S.videoPoster&&(0,i.jsx)("img",{src:u+"/"+S.videoPoster,alt:"Poster Preview",className:"mt-3",width:100}),!k&&L.testimonialVideoPoster&&(0,i.jsx)("small",{className:"text-danger",children:null===(y=L.testimonialVideoPoster)||void 0===y?void 0:null===(N=y.message)||void 0===N?void 0:N.toString()})]})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label",children:"Description"}),(0,i.jsx)("textarea",{className:"form-control",rows:3,...T("description",{})}),L.description&&(0,i.jsx)("small",{className:"text-danger",children:null===(P=L.description)||void 0===P?void 0:null===(f=P.message)||void 0===f?void 0:f.toString()})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label",children:"Order"}),(0,i.jsx)("input",{type:"number",min:"0",className:"form-control",...T("order",{})}),L.order&&(0,i.jsx)("small",{className:"text-danger",children:null===(V=L.order)||void 0===V?void 0:null===(w=V.message)||void 0===w?void 0:w.toString()})]}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:q,children:q?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save"}),(0,i.jsx)(d(),{className:"btn btn-outline-secondary ml-2",href:"/admin/testimonials/",children:"Cancel"})]})})}}}]);