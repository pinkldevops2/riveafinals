"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8778],{889:(e,t,a)=>{a.d(t,{A:()=>p});var s=a(5155),l=a(2115),i=a(2177),n=a(2051),r=a(4478),o=a(6874),d=a.n(o),c=a(6273),m=a(5799);let p=e=>{var t,a,o,p,u,h,g,y,v,x,b,j,f,N,T,w,I,S,C,D;let{initialData:_,onSubmit:F,isSubmitting:q}=e,{register:E,handleSubmit:P,setError:O,control:M,reset:R,getValues:k,setValue:L,formState:{errors:A}}=(0,i.mN)({defaultValues:_||{title:"",subTitle:"",description:"",metaTitle:"",metaDescription:"",photo:null,image:"",order:"0",slug:"",typeId:"",categoryId:""}}),[U,H]=(0,l.useState)(""),[J,V]=(0,l.useState)(null),[X,z]=(0,l.useState)([]),[K,W]=(0,l.useState)([]);(0,l.useEffect)(()=>{(0,r.a0)().then(e=>{e.error?m.oR.error(e.error):e.data&&e.data.length>0?W(e.data.map(e=>({value:e._id,label:e.type}))):O("typeId",{type:"manual",message:"No type id is added in case study type"})}),_&&""!==_.typeId&&Z(null==_?void 0:_.typeId),_&&_.description&&H(_.description)},[]),(0,l.useEffect)(()=>{L("description",U)},[U]);let Y=e=>t=>{var a;e(null!==(a=null==t?void 0:t.value)&&void 0!==a?a:null),(null==t?void 0:t.value)?Z(null==t?void 0:t.value):z([])},Z=e=>{(0,r.e6)(e).then(e=>{e.error?m.oR.error(e.error):e.data&&e.data.length>0?z(e.data.map(e=>({value:e._id,label:e.name}))):O("categoryId",{type:"manual",message:"No categories were added in case-study"})})};return(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("form",{onSubmit:P(e=>{F(e)}),encType:"multipart/form-data",children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"typeId",className:"form-label",children:"Case Study Type *"}),K.length>0&&(0,s.jsx)(i.xI,{name:"typeId",control:M,rules:{required:"Case Study Type is required"},render:e=>{let{field:t}=e;return(0,s.jsx)(n.Ay,{...t,options:K,value:K.find(e=>e.value===t.value)||null,onChange:Y(t.onChange),placeholder:"Select Type"})}}),A.typeId&&(0,s.jsx)("small",{className:"text-danger",children:null===(a=A.typeId)||void 0===a?void 0:null===(t=a.message)||void 0===t?void 0:t.toString()})]}),X.length>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"categoryId",className:"form-label",children:"Category *"}),(0,s.jsx)(i.xI,{name:"categoryId",control:M,rules:{required:"Category is required"},render:e=>{let{field:t}=e;return(0,s.jsx)(n.Ay,{...t,options:X||[],value:X.find(e=>e.value===t.value)||null,onChange:e=>t.onChange(null==e?void 0:e.value),placeholder:"Select Category"})}}),A.categoryId&&(0,s.jsx)("small",{className:"text-danger",children:null===(p=A.categoryId)||void 0===p?void 0:null===(o=p.message)||void 0===o?void 0:o.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title *"}),(0,s.jsx)("input",{type:"text",className:"form-control",...E("title",{required:"Title is required",minLength:{value:3,message:"Must be at least 3 characters"}})}),A.title&&(0,s.jsx)("small",{className:"text-danger",children:null===(h=A.title)||void 0===h?void 0:null===(u=h.message)||void 0===u?void 0:u.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"subTitle",className:"form-label",children:"Sub-Title *"}),(0,s.jsx)("input",{type:"text",className:"form-control",...E("subTitle",{required:"Sub-Title is required"})}),A.subTitle&&(0,s.jsx)("small",{className:"text-danger",children:null===(y=A.subTitle)||void 0===y?void 0:null===(g=y.message)||void 0===g?void 0:g.toString()})]}),_&&""!==_.slug&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"slug",className:"form-label",children:"Slug *"}),(0,s.jsx)("input",{type:"text",className:"form-control",...E("slug",{required:"Slug is required"})}),A.slug&&(0,s.jsx)("small",{className:"text-danger",children:null===(x=A.slug)||void 0===x?void 0:null===(v=x.message)||void 0===v?void 0:v.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"photo",className:"form-label",children:"Image *"}),(0,s.jsxs)("div",{className:"btn-main-box",children:[(0,s.jsx)("input",{type:"file",className:"file-input",...E("photo",{required:!J&&(null==_||!_.image)&&"Image is required"}),onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&(e.target.name,V(URL.createObjectURL(a)))}}),(0,s.jsx)("div",{className:"btn-box",children:"Upload Image"})]}),J&&(0,s.jsx)("img",{src:J,alt:"Image Preview",className:"mt-3",width:100}),!J&&_&&_.image&&(0,s.jsx)("img",{src:"http://localhost:8181/"+_.image,alt:"Image Preview",className:"mt-3",width:100}),!J&&A.photo&&(0,s.jsx)("small",{className:"text-danger",children:null===(j=A.photo)||void 0===j?void 0:null===(b=j.message)||void 0===b?void 0:b.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description "}),(0,s.jsx)(c.A,{value:k("description"),onChange:H}),A.description&&(0,s.jsx)("small",{className:"text-danger",children:null===(N=A.description)||void 0===N?void 0:null===(f=N.message)||void 0===f?void 0:f.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"order",className:"form-label",children:"Order"}),(0,s.jsx)("input",{type:"number",min:"0",className:"form-control",...E("order",{})}),A.order&&(0,s.jsx)("small",{className:"text-danger",children:null===(w=A.order)||void 0===w?void 0:null===(T=w.message)||void 0===T?void 0:T.toString()})]}),(0,s.jsx)("div",{className:"row mb-3",children:(0,s.jsxs)("div",{className:"col-md-12",children:[(0,s.jsx)("label",{htmlFor:"metaTitle",className:"form-label",children:"Meta Title *"}),(0,s.jsx)("input",{type:"text",className:"form-control",placeholder:"Meta Title",...E("metaTitle",{required:"Meta Title is required."})}),A.metaTitle&&(0,s.jsx)("p",{className:"text-red-500",children:null===(S=A.metaTitle)||void 0===S?void 0:null===(I=S.message)||void 0===I?void 0:I.toString()})]})}),(0,s.jsx)("div",{className:"row mb-3",children:(0,s.jsxs)("div",{className:"col-md-12",children:[(0,s.jsx)("label",{htmlFor:"metaDescription",className:"form-label",children:"Meta Description *"}),(0,s.jsx)("textarea",{className:"form-control",placeholder:"Meta Description",...E("metaDescription",{required:"Meta Description is required."})}),A.metaDescription&&(0,s.jsx)("p",{className:"text-red-500",children:null===(D=A.metaDescription)||void 0===D?void 0:null===(C=D.message)||void 0===C?void 0:C.toString()})]})}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:q,children:q?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save"}),(0,s.jsx)(d(),{className:"btn btn-outline-secondary ml-2",href:"/admin/case-study/",children:"Cancel"})]})})}},4478:(e,t,a)=>{a.d(t,{$s:()=>i,K7:()=>o,a0:()=>d,bW:()=>l,e6:()=>c,st:()=>r,zZ:()=>n});let s="http://localhost:8181/api",l=async(e,t,a,l,i)=>(await fetch(s+"/case-study-category?search=".concat(e,"&page=").concat(t,"&limit=").concat(a,"&sortColumn=").concat(l,"&sortOrder=").concat(i),{credentials:"include"})).json(),i=async e=>(await fetch("".concat(s,"/case-study-category/").concat(e),{credentials:"include"})).json(),n=async e=>{let t=new FormData;return t.append("typeId",e.typeId),t.append("name",e.name),t.append("order",e.order),t.append("description",e.description),(await fetch("".concat(s,"/case-study-category/create"),{method:"POST",credentials:"include",body:t})).json()},r=async(e,t)=>{let a=new FormData;return a.append("typeId",t.typeId),a.append("name",t.name),a.append("order",t.order),a.append("description",t.description),(await fetch("".concat(s,"/case-study-category/update/").concat(e),{method:"PUT",credentials:"include",body:a})).json()},o=async e=>(await fetch("".concat(s,"/case-study-category/delete/").concat(e),{method:"DELETE",credentials:"include"})).json(),d=async e=>(await fetch("".concat(s,"/all-case-study-type"))).json(),c=async e=>(await fetch("".concat(s,"/case-study-category-by-type/").concat(e),{credentials:"include"})).json()},6273:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(5155),l=a(2115);let i="http://localhost:8181/api";function n(e){let{value:t,onChange:a}=e,n=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=(e,t)=>new Promise((a,s)=>{let l=new XMLHttpRequest;l.withCredentials=!0,l.open("POST",i+"/upload_image"),l.upload.onprogress=e=>{t(e.loaded/e.total*100)},l.onload=()=>{if(403===l.status){s({message:"HTTP Error: "+l.status,remove:!0});return}if(l.status<200||l.status>=300){s("HTTP Error: "+l.status);return}let e=JSON.parse(l.responseText);if(!e||"string"!=typeof e.location){s("Invalid JSON: "+l.responseText);return}a("http://localhost:8181/"+e.location)},l.onerror=()=>{s("Image upload failed due to a XHR Transport error. Code: "+l.status)};let n=new FormData;n.append("file",e.blob(),e.filename()),l.send(n)}),t=document.createElement("script");return t.src="/assets/js/vendor/tinymce/tinymce.min.js",t.referrerPolicy="origin",t.onload=()=>{window.tinymce.init({selector:"#editor",height:400,menubar:!0,plugins:"code advlist autolink lists link image charmap preview anchor",toolbar:"undo redo | formatselect | bold italic | alignleft aligncenter alignright alignjustify | outdent indent | code",extended_valid_elements:"script[src|async|defer|type|charset]",valid_children:"+body[script]",valid_elements:"*[*]",content_css:"/assets/css/bootstrap.min.css,/assets/css/custom.css,/assets/css/responsive.css,/assets/css/extra.css",allow_script_urls:!0,images_upload_url:i+"/upload_image",images_upload_handler:e,setup:e=>{e.on("change",()=>a(e.getContent()))}})},document.body.appendChild(t),()=>{window.tinymce&&window.tinymce.remove()}},[a]),(0,s.jsx)("textarea",{id:"editor",ref:n,defaultValue:t})}},8418:(e,t,a)=>{a.d(t,{FN:()=>o,YE:()=>n,gF:()=>l,h8:()=>r,yE:()=>i});let s="http://localhost:8181/api",l=async(e,t,a,l,i)=>(await fetch(s+"/case-studies?search=".concat(e,"&page=").concat(t,"&limit=").concat(a,"&sortColumn=").concat(l,"&sortOrder=").concat(i),{credentials:"include"})).json(),i=async e=>(await fetch("".concat(s,"/case-studies/").concat(e),{credentials:"include"})).json(),n=async e=>{let t=new FormData;return t.append("title",e.title),t.append("subTitle",e.subTitle),t.append("description",e.description),t.append("metaTitle",e.metaTitle),t.append("metaDescription",e.metaDescription),t.append("typeId",e.typeId),t.append("categoryId",e.categoryId),t.append("order",e.order),e.photo&&e.photo.length>0&&t.append("file",e.photo[0]),(await fetch("".concat(s,"/case-studies/create"),{method:"POST",credentials:"include",body:t})).json()},r=async(e,t)=>{let a=new FormData;return a.append("title",t.title),a.append("subTitle",t.subTitle),a.append("description",t.description),a.append("metaTitle",t.metaTitle),a.append("metaDescription",t.metaDescription),a.append("typeId",t.typeId),a.append("categoryId",t.categoryId),a.append("order",t.order),t.photo&&t.photo.length>0&&a.append("file",t.photo[0]),a.append("slug",t.slug),(await fetch("".concat(s,"/case-studies/update/").concat(e),{method:"PUT",credentials:"include",body:a})).json()},o=async e=>(await fetch("".concat(s,"/case-studies/delete/").concat(e),{method:"DELETE",credentials:"include"})).json()}}]);