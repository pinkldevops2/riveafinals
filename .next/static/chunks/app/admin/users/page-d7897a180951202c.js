(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8733],{423:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var t=a(5155),r=a(2115),n=a(9587),l=a(9568);function i(e){let{id:s,msg:a,onDelete:i}=e,[c,o]=(0,r.useState)(!1),d=()=>o(!1),h=async()=>{await i(s),d()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>o(!0),className:"btn text-danger",children:(0,t.jsx)("i",{className:"fa fas fa-trash"})}),(0,t.jsxs)(n.A,{show:c,onHide:d,centered:!0,children:[(0,t.jsx)(n.A.Header,{closeButton:!0,children:(0,t.jsx)(n.A.Title,{children:"Confirm Delete"})}),(0,t.jsx)(n.A.Body,{children:a}),(0,t.jsxs)(n.A.Footer,{children:[(0,t.jsx)(l.A,{variant:"secondary",onClick:d,children:"Cancel"}),(0,t.jsx)(l.A,{variant:"danger",onClick:h,children:"Delete"})]})]})]})}},2899:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var t=a(5155),r=a(2115),n=a(5695),l=a(8835),i=a(5679),c=a(4751),o=a(5828),d=a(7478),h=a(423),m=a(6874),u=a.n(m),p=a(5799),f=a(1867),x=a(7124);let j="http://localhost:8181";function g(){let[e,s]=(0,r.useState)(null),a=(0,n.useRouter)(),[m,g]=(0,r.useState)([]),[v,w]=(0,r.useState)(null),[y,N]=(0,r.useState)(!0),[b,S]=(0,r.useState)(0),[_,A]=(0,r.useState)(1),[P,C]=(0,r.useState)(10),[k,E]=(0,r.useState)("_id"),[F,U]=(0,r.useState)("asc"),[D,O]=(0,r.useState)([]);(0,r.useEffect)(()=>{(0,l.E$)().then(e=>{e.error?a.push("/admin/login"):(N(!1),s(e))});var e=localStorage.getItem("userData");e&&O(e=JSON.parse(e))},[]);let T=async e=>{try{let s=await (0,i.j7)(e);!1==s.success?p.oR.error(s.error):(p.oR.success("Users deleted successfully."),R(_,P,k,F))}catch(e){w("error deleting page"),console.error(e)}},R=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_id",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asc";try{(0,i.aU)(e,s,a,t).then(e=>{e.data&&(g(e.data),S(e.total))})}catch(e){console.error("Error fetching users:",e)}finally{}};(0,r.useEffect)(()=>{R(_,P,k,F)},[_,P,k,F]);let K=[{name:"User Name",cell:e=>(0,t.jsx)(t.Fragment,{children:void 0!=e.profile_picture&&""!=e.profile_picture?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mr-3 p-2",children:(0,t.jsx)("img",{className:"img-profile rounded-circle",src:j+"/"+e.profile_picture,width:48})})," ",(0,t.jsx)("span",{children:e.username})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mr-3 p-2",children:(0,t.jsx)("img",{className:"img-profile rounded-circle",src:j+"/uploads/images/undraw_profile.svg",width:48})})," ",(0,t.jsx)("span",{children:e.username})]})}),sortable:!0,sortKey:"username"},{name:"Email",selector:e=>e.email,sortable:!0,sortKey:"email"},{name:"Actions",cell:e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u(),{className:"btn text-primary",href:"/admin/users/"+e._id,children:(0,t.jsx)("i",{className:"fa fas fa-pen"})}),b>1&&D&&D.id!=e._id&&(0,t.jsx)(h.A,{id:e._id,onDelete:T,msg:"Are you sure you want to delete this user?"})]})}];return y?(0,t.jsx)("div",{className:"d-flex justify-content-center align-items-center vh-100",children:(0,t.jsx)(f.A,{animation:"border",variant:"primary"})}):(0,t.jsxs)("div",{id:"wrapper",children:[(0,t.jsx)(c.A,{}),(0,t.jsx)("div",{id:"content-wrapper",className:"d-flex flex-column",children:(0,t.jsxs)("div",{id:"content",children:[(0,t.jsx)(d.A,{}),(0,t.jsxs)("div",{className:"container-fluid",children:[(0,t.jsx)("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:(0,t.jsx)("h1",{className:"h3 mb-0 text-gray-800",children:"Admin Users"})}),(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-xl-12 col-md-12 mb-4",children:(0,t.jsxs)("div",{className:"card shadow mb-4",children:[(0,t.jsxs)("div",{className:"card-header py-3 d-flex justify-content-between",children:[(0,t.jsx)("h6",{className:"m-0 font-weight-bold text-primary",children:"Users List"}),(0,t.jsxs)(u(),{className:"btn btn-dark btn-sm",href:"/admin/users/add",children:[(0,t.jsx)("i",{className:"fa fa-plus"})," Add New User"]})]}),(0,t.jsx)("div",{className:"card-body p-0",children:(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsx)(x.Ay,{columns:K,data:m,pagination:!0,paginationServer:!0,paginationTotalRows:b,paginationPerPage:P,onChangePage:e=>{A(e)},onChangeRowsPerPage:(e,s)=>{C(e),A(s)},onSort:(e,s)=>{E(e.sortKey),U(s)},sortServer:!0,highlightOnHover:!0,striped:!0,customStyles:{headCells:{style:{backgroundColor:"#fff",color:"#858796",fontSize:"16px",fontWeight:"bold",padding:"12px"}},cells:{style:{fontSize:"14px"}},rows:{style:{fontSize:"14px",borderBottom:"1px solid #ddd","&:hover":{backgroundColor:"#f1f1f1"}}}}})})})]})})})]}),(0,t.jsx)(o.A,{})]})})]})}},4834:(e,s,a)=>{Promise.resolve().then(a.bind(a,2899))},5679:(e,s,a)=>{"use strict";a.d(s,{Mv:()=>n,TK:()=>i,aU:()=>r,j7:()=>c,kg:()=>l});let t="http://localhost:8181/api",r=async(e,s,a,r)=>(await fetch(t+"/users?page=".concat(e,"&limit=").concat(s,"&sortColumn=").concat(a,"&sortOrder=").concat(r),{credentials:"include"})).json(),n=async e=>(await fetch("".concat(t,"/users/").concat(e),{credentials:"include"})).json(),l=async e=>{let s=new FormData;return s.append("username",e.username),s.append("email",e.email),s.append("new_password",e.new_password),e.profilePhoto&&e.profilePhoto.length>0&&s.append("file",e.profilePhoto[0]),(await fetch("".concat(t,"/users/create"),{method:"POST",credentials:"include",body:s})).json()},i=async(e,s)=>{let a=new FormData;return a.append("username",s.username),a.append("email",s.email),a.append("new_password",s.new_password),s.profilePhoto&&s.profilePhoto.length>0&&a.append("file",s.profilePhoto[0]),(await fetch("".concat(t,"/users/update/").concat(e),{method:"PUT",credentials:"include",body:a})).json()},c=async e=>(await fetch("".concat(t,"/users/delete/").concat(e),{method:"DELETE",credentials:"include"})).json()}},e=>{var s=s=>e(e.s=s);e.O(0,[5799,6813,2467,5319,8441,1684,7358],()=>s(4834)),_N_E=e.O()}]);