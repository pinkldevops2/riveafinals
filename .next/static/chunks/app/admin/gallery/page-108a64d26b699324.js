(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3831],{423:(e,a,t)=>{"use strict";t.d(a,{A:()=>o});var l=t(5155),r=t(2115),s=t(9587),n=t(9568);function o(e){let{id:a,msg:t,onDelete:o}=e,[i,d]=(0,r.useState)(!1),c=()=>d(!1),h=async()=>{await o(a),c()};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>d(!0),className:"btn text-danger",children:(0,l.jsx)("i",{className:"fa fas fa-trash"})}),(0,l.jsxs)(s.A,{show:i,onHide:c,centered:!0,children:[(0,l.jsx)(s.A.Header,{closeButton:!0,children:(0,l.jsx)(s.A.Title,{children:"Confirm Delete"})}),(0,l.jsx)(s.A.Body,{children:t}),(0,l.jsxs)(s.A.Footer,{children:[(0,l.jsx)(n.A,{variant:"secondary",onClick:c,children:"Cancel"}),(0,l.jsx)(n.A,{variant:"danger",onClick:h,children:"Delete"})]})]})]})}},1449:(e,a,t)=>{"use strict";t.d(a,{Ob:()=>o,X1:()=>n,cV:()=>i,x3:()=>r,z0:()=>s});let l="http://localhost:8181/api",r=async(e,a,t,r)=>(await fetch(l+"/gallery?page=".concat(e,"&limit=").concat(a,"&sortColumn=").concat(t,"&sortOrder=").concat(r),{credentials:"include"})).json(),s=async e=>(await fetch("".concat(l,"/gallery/").concat(e),{credentials:"include"})).json(),n=async e=>{let a=new FormData;return a.append("type",e.type),a.append("order",e.order),"image"==e.type&&e.galleryPhoto&&e.galleryPhoto.length>0&&a.append("file",e.galleryPhoto[0]),"video"==e.type&&(e.galleryVideo&&e.galleryVideo.length>0&&a.append("video",e.galleryVideo[0]),e.galleryVideoPoster&&e.galleryVideoPoster.length>0&&a.append("videoPoster",e.galleryVideoPoster[0])),(await fetch("".concat(l,"/gallery/create"),{method:"POST",credentials:"include",body:a})).json()},o=async(e,a)=>{let t=new FormData;return t.append("type",a.type),t.append("order",a.order),console.log("-11->",a),"image"==a.type&&a.galleryPhoto&&a.galleryPhoto.length>0&&t.append("file",a.galleryPhoto[0]),"video"==a.type&&(a.galleryVideo&&a.galleryVideo.length>0&&t.append("video",a.galleryVideo[0]),a.galleryVideoPoster&&a.galleryVideoPoster.length>0&&t.append("videoPoster",a.galleryVideoPoster[0])),(await fetch("".concat(l,"/gallery/update/").concat(e),{method:"PUT",credentials:"include",body:t})).json()},i=async e=>(await fetch("".concat(l,"/gallery/delete/").concat(e),{method:"DELETE",credentials:"include"})).json()},3805:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>j});var l=t(5155),r=t(2115),s=t(5695),n=t(8835),o=t(1449),i=t(4751),d=t(5828),c=t(7478),h=t(423),g=t(6874),m=t.n(g),y=t(5799),p=t(1867),x=t(7124);let u="http://localhost:8181";function j(){let[e,a]=(0,r.useState)(null),t=(0,s.useRouter)(),[g,j]=(0,r.useState)([]),[f,v]=(0,r.useState)(null),[b,w]=(0,r.useState)(!0),[N,P]=(0,r.useState)(0),[S,A]=(0,r.useState)(1),[V,C]=(0,r.useState)(10),[_,k]=(0,r.useState)("_id"),[E,F]=(0,r.useState)("asc");(0,r.useEffect)(()=>{(0,n.E$)().then(e=>{e.error?t.push("/admin/login"):(w(!1),a(e))})},[]);let O=async e=>{try{let a=await (0,o.cV)(e);!1==a.success?y.oR.error(a.error):(y.oR.success("Gallery image deleted successfully."),D(S,V,_,E))}catch(e){v("error deleting page"),console.error(e)}},D=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_id",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asc";try{(0,o.x3)(e,a,t,l).then(e=>{e.data&&(j(e.data),P(e.total))})}catch(e){console.error("Error fetching users:",e)}finally{}};(0,r.useEffect)(()=>{D(S,V,_,E)},[S,V,_,E]);let G=[{name:"Type",selector:e=>e.type,sortable:!0,sortKey:"type"},{name:"Image",cell:e=>(0,l.jsx)(l.Fragment,{children:"image"==e.type&&void 0!=e.image&&""!=e.image?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"mr-3 p-2",children:(0,l.jsx)("img",{src:u+"/"+e.image,width:48,alt:"Gallery Image"})})}):"video"==e.type&&void 0!=e.videoPoster&&""!=e.videoPoster?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"mr-3 p-2",children:(0,l.jsx)("img",{src:u+"/"+e.videoPoster,width:48,alt:"video poster image"})})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"mr-3 p-2",children:(0,l.jsx)("img",{src:u+"/uploads/images/undraw_profile.svg",width:48,alt:"Gallery Image"})})})}),sortable:!1,sortKey:"image"},{name:"Order",selector:e=>e.order,sortable:!0,sortKey:"order"},{name:"Actions",cell:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m(),{className:"btn text-primary",href:"/admin/gallery/"+e._id,children:(0,l.jsx)("i",{className:"fa fas fa-pen"})}),(0,l.jsx)(h.A,{id:e._id,onDelete:O,msg:"Are you sure you want to delete this Gallery image?"})]})}];return b?(0,l.jsx)("div",{className:"d-flex justify-content-center align-items-center vh-100",children:(0,l.jsx)(p.A,{animation:"border",variant:"primary"})}):(0,l.jsxs)("div",{id:"wrapper",children:[(0,l.jsx)(i.A,{}),(0,l.jsx)("div",{id:"content-wrapper",className:"d-flex flex-column",children:(0,l.jsxs)("div",{id:"content",children:[(0,l.jsx)(c.A,{}),(0,l.jsxs)("div",{className:"container-fluid",children:[(0,l.jsx)("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:(0,l.jsx)("h1",{className:"h3 mb-0 text-gray-800",children:"Gallery"})}),(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-xl-12 col-md-12 mb-4",children:(0,l.jsxs)("div",{className:"card shadow mb-4",children:[(0,l.jsxs)("div",{className:"card-header py-3 d-flex justify-content-between",children:[(0,l.jsx)("h6",{className:"m-0 font-weight-bold text-primary",children:"Gallery Images"}),(0,l.jsxs)(m(),{className:"btn btn-dark btn-sm",href:"/admin/gallery/add",children:[(0,l.jsx)("i",{className:"fa fa-plus"})," Add New Image"]})]}),(0,l.jsx)("div",{className:"card-body p-0",children:(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsx)(x.Ay,{columns:G,data:g,pagination:!0,paginationServer:!0,paginationTotalRows:N,paginationPerPage:V,onChangePage:e=>{A(e)},onChangeRowsPerPage:(e,a)=>{C(e),A(a)},onSort:(e,a)=>{k(e.sortKey),F(a)},sortServer:!0,highlightOnHover:!0,striped:!0,customStyles:{headCells:{style:{backgroundColor:"#fff",color:"#858796",fontSize:"16px",fontWeight:"bold",padding:"12px"}},cells:{style:{fontSize:"14px"}},rows:{style:{fontSize:"14px",borderBottom:"1px solid #ddd","&:hover":{backgroundColor:"#f1f1f1"}}}}})})})]})})})]}),(0,l.jsx)(d.A,{})]})})]})}},5292:(e,a,t)=>{Promise.resolve().then(t.bind(t,3805))}},e=>{var a=a=>e(e.s=a);e.O(0,[5799,6813,2467,5319,8441,1684,7358],()=>a(5292)),_N_E=e.O()}]);