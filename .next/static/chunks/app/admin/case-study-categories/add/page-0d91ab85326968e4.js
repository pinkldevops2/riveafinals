(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3670],{1732:(e,a,s)=>{Promise.resolve().then(s.bind(s,8432))},2327:(e,a,s)=>{"use strict";s.d(a,{A:()=>m});var t=s(5155),r=s(2177),n=s(2115),l=s(2051),d=s(4478),c=s(6874),i=s.n(c),o=s(5799);let m=e=>{var a,s,c,m,u,p,y,h;let{initialData:x,onSubmit:v,isSubmitting:j}=e,{register:b,handleSubmit:g,setError:f,control:N,reset:S,formState:{errors:w}}=(0,r.mN)({defaultValues:x||{typeId:"",name:"",order:"0",description:""}}),[I,C]=(0,n.useState)([]);(0,n.useEffect)(()=>{(0,d.a0)().then(e=>{e.error?o.oR.error(e.error):e.data&&e.data.length>0?C(e.data.map(e=>({value:e._id,label:e.type}))):f("typeId",{type:"manual",message:"No type id is added in case study type"})})},[]);let E=e=>a=>{var s;e(null!==(s=null==a?void 0:a.value)&&void 0!==s?s:null)};return(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("form",{onSubmit:g(e=>{v(e)}),encType:"multipart/form-data",children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"typeId",className:"form-label",children:"Case Study Type *"}),I.length>0&&(0,t.jsx)(r.xI,{name:"typeId",control:N,rules:{required:"Case Study Type is required"},render:e=>{let{field:a}=e;return(0,t.jsx)(l.Ay,{...a,options:I,value:I.find(e=>e.value===a.value)||null,onChange:E(a.onChange),placeholder:"Select Type"})}}),w.typeId&&(0,t.jsx)("small",{className:"text-danger",children:null===(s=w.typeId)||void 0===s?void 0:null===(a=s.message)||void 0===a?void 0:a.toString()})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name *"}),(0,t.jsx)("input",{type:"text",className:"form-control",...b("name",{required:"Name is required",minLength:{value:3,message:"Must be at least 3 characters"}})}),w.name&&(0,t.jsx)("small",{className:"text-danger",children:null===(m=w.name)||void 0===m?void 0:null===(c=m.message)||void 0===c?void 0:c.toString()})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description "}),(0,t.jsx)("textarea",{className:"form-control",rows:3,...b("description",{})}),w.description&&(0,t.jsx)("small",{className:"text-danger",children:null===(p=w.description)||void 0===p?void 0:null===(u=p.message)||void 0===u?void 0:u.toString()})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Order"}),(0,t.jsx)("input",{type:"number",min:"0",className:"form-control",...b("order",{})}),w.order&&(0,t.jsx)("small",{className:"text-danger",children:null===(h=w.order)||void 0===h?void 0:null===(y=h.message)||void 0===y?void 0:y.toString()})]}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:j,children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save"}),(0,t.jsx)(i(),{className:"btn btn-outline-secondary ml-2",href:"/admin/case-study-categories",children:"Cancel"})]})})}},4478:(e,a,s)=>{"use strict";s.d(a,{$s:()=>n,K7:()=>c,a0:()=>i,bW:()=>r,e6:()=>o,st:()=>d,zZ:()=>l});let t="http://localhost:8181/api",r=async(e,a,s,r,n)=>(await fetch(t+"/case-study-category?search=".concat(e,"&page=").concat(a,"&limit=").concat(s,"&sortColumn=").concat(r,"&sortOrder=").concat(n),{credentials:"include"})).json(),n=async e=>(await fetch("".concat(t,"/case-study-category/").concat(e),{credentials:"include"})).json(),l=async e=>{let a=new FormData;return a.append("typeId",e.typeId),a.append("name",e.name),a.append("order",e.order),a.append("description",e.description),(await fetch("".concat(t,"/case-study-category/create"),{method:"POST",credentials:"include",body:a})).json()},d=async(e,a)=>{let s=new FormData;return s.append("typeId",a.typeId),s.append("name",a.name),s.append("order",a.order),s.append("description",a.description),(await fetch("".concat(t,"/case-study-category/update/").concat(e),{method:"PUT",credentials:"include",body:s})).json()},c=async e=>(await fetch("".concat(t,"/case-study-category/delete/").concat(e),{method:"DELETE",credentials:"include"})).json(),i=async e=>(await fetch("".concat(t,"/all-case-study-type"))).json(),o=async e=>(await fetch("".concat(t,"/case-study-category-by-type/").concat(e),{credentials:"include"})).json()},8432:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p});var t=s(5155),r=s(2115),n=s(5695),l=s(8835),d=s(4751),c=s(5828),i=s(7478),o=s(4478),m=s(2327),u=s(5799);function p(){let[e,a]=(0,r.useState)(null),s=(0,n.useRouter)(),[p,y]=(0,r.useState)(!1),[h,x]=(0,r.useState)(null),[v,j]=(0,r.useState)({name:"",order:"0",description:""}),b=async e=>{try{y(!0),x(null),await (0,o.zZ)(e).then(e=>{e.error?(u.oR.error(e.error),x(e.error||"Failed to create a category")):(u.oR.success("Category added successfully."),s.push("/admin/case-study-categories"))})}catch(e){u.oR.error("Failed to create a category")}finally{y(!1)}};return(0,r.useEffect)(()=>{(0,l.E$)().then(e=>{e.error?s.push("/admin/login"):a(e)})},[]),(0,t.jsxs)("div",{id:"wrapper",children:[(0,t.jsx)(d.A,{}),(0,t.jsx)("div",{id:"content-wrapper",className:"d-flex flex-column",children:(0,t.jsxs)("div",{id:"content",children:[(0,t.jsx)(i.A,{}),(0,t.jsxs)("div",{className:"container-fluid",children:[(0,t.jsx)("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:(0,t.jsx)("h1",{className:"h3 mb-0 text-gray-800",children:"Add Category"})}),(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-xl-12 col-md-12 mb-12",children:(0,t.jsx)("div",{className:"card border-left-primary shadow h-100 py-2",children:(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)(m.A,{initialData:v,onSubmit:b,isSubmitting:p})})})})})]}),(0,t.jsx)(c.A,{})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[5799,6813,2177,3259,5319,8441,1684,7358],()=>a(1732)),_N_E=e.O()}]);