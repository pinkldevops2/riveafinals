(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3256],{1698:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p});var t=s(5155),n=s(2115),l=s(5695),r=s(8835),d=s(4751),c=s(5828),i=s(7478),o=s(4478),m=s(2327),u=s(5799);function p(){let[e,a]=(0,n.useState)(null),s=(0,l.useRouter)(),[p,h]=(0,n.useState)(null),[y,x]=(0,n.useState)(!0),[v,j]=(0,n.useState)(!1),[f,b]=(0,n.useState)(null),{id:g}=(0,l.useParams)();(0,n.useEffect)(()=>{(async()=>{try{x(!0);let e=await (0,o.$s)(g);h(e.data),b(null)}catch(e){b("Failed to fetch category data"),console.error(e)}finally{x(!1)}})()},[g]);let N=async e=>{try{j(!0),b(null),await (0,o.st)(g,e);let a=await (0,o.$s)(g);h(a.data),u.oR.success("Category updated successfully."),s.push("/admin/case-study-categories")}catch(e){b(e.message||"Failed to update category"),console.error(e)}finally{j(!1)}};return((0,n.useEffect)(()=>{(0,r.E$)().then(e=>{e.error?s.push("/admin/login"):a(e)})},[]),y)?(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"d-flex justify-content-center my-5",children:(0,t.jsx)("div",{className:"spinner-border",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}):(0,t.jsxs)("div",{id:"wrapper",children:[(0,t.jsx)(d.A,{}),(0,t.jsx)("div",{id:"content-wrapper",className:"d-flex flex-column",children:(0,t.jsxs)("div",{id:"content",children:[(0,t.jsx)(i.A,{}),(0,t.jsxs)("div",{className:"container-fluid",children:[(0,t.jsx)("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:(0,t.jsxs)("h1",{className:"h3",children:[" Edit Category: ",null==p?void 0:p.name]})}),(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-xl-12 col-md-12 mb-12",children:(0,t.jsx)("div",{className:"card border-left-primary shadow h-100 py-2",children:(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)(m.A,{initialData:p,onSubmit:N,isSubmitting:v})})})})})]}),(0,t.jsx)(c.A,{})]})})]})}},2327:(e,a,s)=>{"use strict";s.d(a,{A:()=>m});var t=s(5155),n=s(2177),l=s(2115),r=s(2051),d=s(4478),c=s(6874),i=s.n(c),o=s(5799);let m=e=>{var a,s,c,m,u,p,h,y;let{initialData:x,onSubmit:v,isSubmitting:j}=e,{register:f,handleSubmit:b,setError:g,control:N,reset:w,formState:{errors:S}}=(0,n.mN)({defaultValues:x||{typeId:"",name:"",order:"0",description:""}}),[E,I]=(0,l.useState)([]);(0,l.useEffect)(()=>{(0,d.a0)().then(e=>{e.error?o.oR.error(e.error):e.data&&e.data.length>0?I(e.data.map(e=>({value:e._id,label:e.type}))):g("typeId",{type:"manual",message:"No type id is added in case study type"})})},[]);let C=e=>a=>{var s;e(null!==(s=null==a?void 0:a.value)&&void 0!==s?s:null)};return(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("form",{onSubmit:b(e=>{v(e)}),encType:"multipart/form-data",children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"typeId",className:"form-label",children:"Case Study Type *"}),E.length>0&&(0,t.jsx)(n.xI,{name:"typeId",control:N,rules:{required:"Case Study Type is required"},render:e=>{let{field:a}=e;return(0,t.jsx)(r.Ay,{...a,options:E,value:E.find(e=>e.value===a.value)||null,onChange:C(a.onChange),placeholder:"Select Type"})}}),S.typeId&&(0,t.jsx)("small",{className:"text-danger",children:null===(s=S.typeId)||void 0===s?void 0:null===(a=s.message)||void 0===a?void 0:a.toString()})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name *"}),(0,t.jsx)("input",{type:"text",className:"form-control",...f("name",{required:"Name is required",minLength:{value:3,message:"Must be at least 3 characters"}})}),S.name&&(0,t.jsx)("small",{className:"text-danger",children:null===(m=S.name)||void 0===m?void 0:null===(c=m.message)||void 0===c?void 0:c.toString()})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description "}),(0,t.jsx)("textarea",{className:"form-control",rows:3,...f("description",{})}),S.description&&(0,t.jsx)("small",{className:"text-danger",children:null===(p=S.description)||void 0===p?void 0:null===(u=p.message)||void 0===u?void 0:u.toString()})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Order"}),(0,t.jsx)("input",{type:"number",min:"0",className:"form-control",...f("order",{})}),S.order&&(0,t.jsx)("small",{className:"text-danger",children:null===(y=S.order)||void 0===y?void 0:null===(h=y.message)||void 0===h?void 0:h.toString()})]}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:j,children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save"}),(0,t.jsx)(i(),{className:"btn btn-outline-secondary ml-2",href:"/admin/case-study-categories",children:"Cancel"})]})})}},4478:(e,a,s)=>{"use strict";s.d(a,{$s:()=>l,K7:()=>c,a0:()=>i,bW:()=>n,e6:()=>o,st:()=>d,zZ:()=>r});let t="http://localhost:8181/api",n=async(e,a,s,n,l)=>(await fetch(t+"/case-study-category?search=".concat(e,"&page=").concat(a,"&limit=").concat(s,"&sortColumn=").concat(n,"&sortOrder=").concat(l),{credentials:"include"})).json(),l=async e=>(await fetch("".concat(t,"/case-study-category/").concat(e),{credentials:"include"})).json(),r=async e=>{let a=new FormData;return a.append("typeId",e.typeId),a.append("name",e.name),a.append("order",e.order),a.append("description",e.description),(await fetch("".concat(t,"/case-study-category/create"),{method:"POST",credentials:"include",body:a})).json()},d=async(e,a)=>{let s=new FormData;return s.append("typeId",a.typeId),s.append("name",a.name),s.append("order",a.order),s.append("description",a.description),(await fetch("".concat(t,"/case-study-category/update/").concat(e),{method:"PUT",credentials:"include",body:s})).json()},c=async e=>(await fetch("".concat(t,"/case-study-category/delete/").concat(e),{method:"DELETE",credentials:"include"})).json(),i=async e=>(await fetch("".concat(t,"/all-case-study-type"))).json(),o=async e=>(await fetch("".concat(t,"/case-study-category-by-type/").concat(e),{credentials:"include"})).json()},5918:(e,a,s)=>{Promise.resolve().then(s.bind(s,1698))}},e=>{var a=a=>e(e.s=a);e.O(0,[5799,6813,2177,3259,5319,8441,1684,7358],()=>a(5918)),_N_E=e.O()}]);