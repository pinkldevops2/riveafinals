(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8670],{423:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var n=t(5155),r=t(2115),a=t(9587),l=t(9568);function c(e){let{id:s,msg:t,onDelete:c}=e,[i,d]=(0,r.useState)(!1),o=()=>d(!1),h=async()=>{await c(s),o()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>d(!0),className:"btn text-danger",children:(0,n.jsx)("i",{className:"fa fas fa-trash"})}),(0,n.jsxs)(a.A,{show:i,onHide:o,centered:!0,children:[(0,n.jsx)(a.A.Header,{closeButton:!0,children:(0,n.jsx)(a.A.Title,{children:"Confirm Delete"})}),(0,n.jsx)(a.A.Body,{children:t}),(0,n.jsxs)(a.A.Footer,{children:[(0,n.jsx)(l.A,{variant:"secondary",onClick:o,children:"Cancel"}),(0,n.jsx)(l.A,{variant:"danger",onClick:h,children:"Delete"})]})]})]})}},3977:(e,s,t)=>{Promise.resolve().then(t.bind(t,7361))},7361:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var n=t(5155),r=t(2115),a=t(5695),l=t(8835);t(7383);let c="http://localhost:8181/api",i=async(e,s,t,n,r)=>(await fetch(c+"/contact-form?search=".concat(e,"&page=").concat(s,"&limit=").concat(t,"&sortColumn=").concat(n,"&sortOrder=").concat(r),{credentials:"include"})).json(),d=async e=>(await fetch("".concat(c,"/contact-form/delete/").concat(e),{method:"DELETE",credentials:"include"})).json();var o=t(4751),h=t(5828),x=t(7478),m=t(423),j=t(5799),u=t(1867),g=t(9587),f=t(9568),p=t(7124),y=t(2940),v=t.n(y);function b(){let[e,s]=(0,r.useState)(null),t=(0,a.useRouter)(),[c,y]=(0,r.useState)([]),[b,S]=(0,r.useState)(null),[A,N]=(0,r.useState)(null),[w,C]=(0,r.useState)(!1),[D,k]=(0,r.useState)(!0),[E,P]=(0,r.useState)(0),[_,H]=(0,r.useState)(1),[F,T]=(0,r.useState)(10),[B,R]=(0,r.useState)("createdAt"),[K,M]=(0,r.useState)("desc"),[O,Y]=(0,r.useState)(""),z=()=>C(!1),L=()=>C(!0);(0,r.useEffect)(()=>{(0,l.E$)().then(e=>{e.error?t.push("/admin/login"):s(e)})},[]);let W=async e=>{try{let s=await d(e);!1==s.success?j.oR.error(s.error):(j.oR.success("Contact form entry deleted successfully."),q(_,F,B,K))}catch(e){S("error deleting page"),console.error(e)}},$=e=>{N(e),L()},q=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"createdAt",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"desc",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";k(!0);try{i(r,e,s,t,n).then(e=>{e.data&&(y(e.data),P(e.total)),k(!1)})}catch(e){console.error("Error fetching users:",e)}finally{k(!1)}};(0,r.useEffect)(()=>{q(_,F,B,K,O)},[_,F,B,K,O]);let G=[{name:"Name",selector:e=>e.name,sortable:!0,sortKey:"name"},{name:"Phone",selector:e=>e.phone},{name:"Department/Schedule",selector:e=>e.department},{name:"Message",selector:e=>e.message},{name:"Date",selector:e=>e.date,sortable:!0,sortKey:"date"},{name:"Time",selector:e=>e.time},{name:"Submission Date",cell:e=>(0,n.jsx)(n.Fragment,{children:v()(e.createdAt).format("YYYY-MM-DD HH:mm:ss")}),sortable:!0,sortKey:"createdAt"},{name:"Actions",cell:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:"btn text-primary",onClick:()=>$(e),children:(0,n.jsx)("i",{className:"fa fas fa-eye"})}),(0,n.jsx)(m.A,{id:e._id,onDelete:W,msg:"Are you sure you want to delete this entry?"})]})}];return D?(0,n.jsx)("div",{className:"d-flex justify-content-center align-items-center vh-100",children:(0,n.jsx)(u.A,{animation:"border",variant:"primary"})}):(0,n.jsxs)("div",{id:"wrapper",children:[(0,n.jsx)(o.A,{}),(0,n.jsx)("div",{id:"content-wrapper",className:"d-flex flex-column",children:(0,n.jsxs)("div",{id:"content",children:[(0,n.jsx)(x.A,{}),(0,n.jsxs)("div",{className:"container-fluid",children:[(0,n.jsxs)("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:[(0,n.jsx)("h1",{className:"h3 mb-0 text-gray-800",children:"Contact Submissions"}),(0,n.jsx)("div",{children:(0,n.jsxs)("form",{className:"search-form admin-search",children:[(0,n.jsx)("input",{type:"text",onChange:e=>{Y(e.target.value)},name:"search",placeholder:"Search"}),(0,n.jsx)("button",{type:"button",className:"search_btn",children:(0,n.jsx)("img",{src:"/images/icon-search.svg"})})]})})]}),(0,n.jsx)("div",{className:"row",children:(0,n.jsx)("div",{className:"col-xl-12 col-md-12 mb-4",children:(0,n.jsxs)("div",{className:"card shadow mb-4",children:[(0,n.jsx)("div",{className:"card-header py-3 d-flex justify-content-between",children:(0,n.jsx)("h6",{className:"m-0 font-weight-bold text-primary",children:"Contact Submissions"})}),(0,n.jsx)("div",{className:"card-body p-0",children:(0,n.jsx)("div",{className:"table-responsive",children:(0,n.jsx)(p.Ay,{columns:G,data:c,pagination:!0,paginationServer:!0,paginationTotalRows:E,paginationPerPage:F,onChangePage:e=>{H(e)},onChangeRowsPerPage:(e,s)=>{T(e),H(s)},onSort:(e,s)=>{R(e.sortKey),M(s)},sortServer:!0,highlightOnHover:!0,striped:!0,customStyles:{headCells:{style:{backgroundColor:"#fff",color:"#858796",fontSize:"16px",fontWeight:"bold",padding:"12px"}},cells:{style:{fontSize:"14px"}},rows:{style:{fontSize:"14px",borderBottom:"1px solid #ddd","&:hover":{backgroundColor:"#f1f1f1"}}}}})})})]})})})]}),(0,n.jsx)(h.A,{})]})}),(0,n.jsxs)(g.A,{show:w,onHide:z,children:[(0,n.jsx)(g.A.Header,{closeButton:!0,children:(0,n.jsx)(g.A.Title,{children:"Submitted Details"})}),(0,n.jsx)(g.A.Body,{children:A?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("table",{className:"table table-bordered",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Name:"})}),(0,n.jsx)("td",{width:"70%",children:A.name})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Email:"})}),(0,n.jsx)("td",{children:A.email})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Phone:"})}),(0,n.jsx)("td",{children:A.phone})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Department/Schedule:"})}),(0,n.jsx)("td",{children:A.department})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Date:"})}),(0,n.jsx)("td",{children:null==A?void 0:A.date})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Time:"})}),(0,n.jsx)("td",{children:null==A?void 0:A.time})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Message:"})}),(0,n.jsx)("td",{children:A.message})]})]})})}):(0,n.jsx)("p",{children:"No details available."})}),(0,n.jsx)(g.A.Footer,{children:(0,n.jsx)(f.A,{variant:"secondary",onClick:z,children:"Close"})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[586,5799,6813,2467,5319,8441,1684,7358],()=>s(3977)),_N_E=e.O()}]);