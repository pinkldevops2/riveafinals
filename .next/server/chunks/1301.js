"use strict";exports.id=1301,exports.ids=[1301],exports.modules={829:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(60687),i=a(43210),l=a(27605),o=a(44834),r=a(78870),n=a(85814),d=a.n(n),m=a(8222);let c=[{value:"image",label:"Image"},{value:"video",label:"Video"}],p="http://localhost:8181",h=({initialData:e,onSubmit:t,isSubmitting:a})=>{let{register:n,handleSubmit:h,setError:g,control:u,reset:x,formState:{errors:j}}=(0,l.mN)({defaultValues:e||{title:"",type:"",categories:[],testimonialPhoto:null,testimonialVideo:null,testimonialVideoPoster:null,image:"",order:"0",slug:"",description:""}}),[b,v]=(0,i.useState)(null),[N,y]=(0,i.useState)(null),[f,P]=(0,i.useState)(null),[w,V]=(0,i.useState)([]),[$,S]=(0,i.useState)(e?.type||"image");(0,i.useEffect)(()=>{(0,r.bW)(1,1e3).then(e=>{e.error?m.oR.error(e.error):e.data&&e.data.length>0?V(e.data.map(e=>({value:e._id,label:e.name}))):g("categories",{type:"manual",message:"No categories were added in testimonial type"})})},[]);let C=e=>{let t=e.target.files?.[0];if(t){let a=e.target.name,s=URL.createObjectURL(t);"testimonialPhoto"==a&&v(s),"testimonialVideoPoster"==a&&P(s)}},q=e=>t=>{e(t?.value??null),S(t?.value)};return(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("form",{onSubmit:h(e=>{t(e)}),encType:"multipart/form-data",children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"categories",className:"form-label",children:"Category *"}),w.length>0&&(0,s.jsx)(l.xI,{name:"categories",control:u,rules:{required:"category is required"},render:({field:e})=>(0,s.jsx)(o.Ay,{...e,options:w,isMulti:!0,isClearable:!0,value:w.filter(t=>e.value?.includes(t.value)),onChange:t=>e.onChange(t.map(e=>e.value)),isLoading:!w.length,placeholder:"Select Categories"})}),j.categories&&(0,s.jsx)("small",{className:"text-danger",children:j.categories?.message?.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title *"}),(0,s.jsx)("input",{type:"text",className:"form-control",...n("title",{required:"Title is required",minLength:{value:3,message:"Must be at least 3 characters"}})}),j.title&&(0,s.jsx)("small",{className:"text-danger",children:j.title?.message?.toString()})]}),e&&""!==e.slug&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"slug",className:"form-label",children:"Slug *"}),(0,s.jsx)("input",{type:"text",className:"form-control",...n("slug",{})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"type",className:"form-label",children:"Type *"}),(0,s.jsx)(l.xI,{name:"type",control:u,rules:{required:"Type is required"},render:({field:e})=>(0,s.jsx)(o.Ay,{...e,options:c,value:c.find(t=>t.value===e.value)||null,onChange:q(e.onChange),placeholder:"Select Type"})}),j.type&&(0,s.jsx)("small",{className:"text-danger",children:j.type?.message?.toString()})]}),"image"==$&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"testimonialPhoto",className:"form-label",children:"Image *"}),(0,s.jsxs)("div",{className:"btn-main-box",children:[(0,s.jsx)("input",{type:"file",className:"file-input",...n("testimonialPhoto",{required:!(b||e?.image)&&"Image is required"}),onChange:C}),(0,s.jsx)("div",{className:"btn-box",children:"Upload Image"})]}),b&&(0,s.jsx)("img",{src:b,alt:"Image Preview",className:"mt-3",width:100}),!b&&e&&e.image&&(0,s.jsx)("img",{src:p+"/"+e.image,alt:"Image Preview",className:"mt-3",width:100}),!b&&j.testimonialPhoto&&(0,s.jsx)("small",{className:"text-danger",children:j.testimonialPhoto?.message?.toString()})]}),(0,s.jsxs)("div",{className:"row",children:["video"==$&&(0,s.jsxs)("div",{className:"mb-3 col-md-4",children:[(0,s.jsx)("label",{className:"form-label",children:"Video"}),(0,s.jsxs)("div",{className:"btn-main-box",children:[(0,s.jsx)("input",{type:"file",className:"file-input",accept:"video/*",...n("testimonialVideo",{required:!(N||e?.video)&&"Video is required"}),onChange:e=>{let t=e.target.files?.[0];t&&y(URL.createObjectURL(t))}}),(0,s.jsx)("div",{className:"btn-box",children:"Upload Video"})]}),N&&(0,s.jsx)("div",{className:"video-preview mt-3",children:(0,s.jsx)("video",{src:N,controls:!0,width:320,height:240,className:"rounded shadow-md"})}),!N&&e&&e.video&&(0,s.jsx)("div",{className:"video-preview mt-3",children:(0,s.jsx)("video",{src:p+"/"+e.video,controls:!0,width:320,height:240,className:"rounded shadow-md"})}),!N&&j.testimonialVideo&&(0,s.jsx)("small",{className:"text-danger",children:j.testimonialVideo?.message?.toString()})]}),"video"==$&&(0,s.jsxs)("div",{className:"mb-3 col-md-4",children:[(0,s.jsx)("label",{className:"form-label",children:"Poster Image"}),(0,s.jsxs)("div",{className:"btn-main-box",children:[(0,s.jsx)("input",{type:"file",className:"file-input",...n("testimonialVideoPoster",{required:!(f||e?.videoPoster)&&"Poster is required"}),onChange:C}),(0,s.jsx)("div",{className:"btn-box",children:"Upload Image"})]}),f&&(0,s.jsx)("img",{src:f,alt:"Poster Preview",className:"mt-3",width:100}),!f&&e&&e.videoPoster&&(0,s.jsx)("img",{src:p+"/"+e.videoPoster,alt:"Poster Preview",className:"mt-3",width:100}),!f&&j.testimonialVideoPoster&&(0,s.jsx)("small",{className:"text-danger",children:j.testimonialVideoPoster?.message?.toString()})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Description"}),(0,s.jsx)("textarea",{className:"form-control",rows:3,...n("description",{})}),j.description&&(0,s.jsx)("small",{className:"text-danger",children:j.description?.message?.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Order"}),(0,s.jsx)("input",{type:"number",min:"0",className:"form-control",...n("order",{})}),j.order&&(0,s.jsx)("small",{className:"text-danger",children:j.order?.message?.toString()})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:a,children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save"}),(0,s.jsx)(d(),{className:"btn btn-outline-secondary ml-2",href:"/admin/testimonials/",children:"Cancel"})]})})}},78870:(e,t,a)=>{a.d(t,{$s:()=>l,K7:()=>n,bW:()=>i,st:()=>r,zZ:()=>o});let s="http://localhost:8181/api",i=async(e,t,a,i,l)=>(await fetch(s+`/testimonial-category?search=${e}&page=${t}&limit=${a}&sortColumn=${i}&sortOrder=${l}`,{credentials:"include"})).json(),l=async e=>(await fetch(`${s}/testimonial-category/${e}`,{credentials:"include"})).json(),o=async e=>{let t=new FormData;return t.append("name",e.name),t.append("order",e.order),t.append("description",e.description),(await fetch(`${s}/testimonial-category/create`,{method:"POST",credentials:"include",body:t})).json()},r=async(e,t)=>{let a=new FormData;return a.append("name",t.name),a.append("order",t.order),a.append("description",t.description),(await fetch(`${s}/testimonial-category/update/${e}`,{method:"PUT",credentials:"include",body:a})).json()},n=async e=>(await fetch(`${s}/testimonial-category/delete/${e}`,{method:"DELETE",credentials:"include"})).json()},98345:(e,t,a)=>{a.d(t,{GW:()=>o,aN:()=>l,fI:()=>r,r$:()=>n,t1:()=>i});let s="http://localhost:8181/api",i=async(e,t,a,i,l)=>(await fetch(s+`/testimonials?search=${e}&page=${t}&limit=${a}&sortColumn=${i}&sortOrder=${l}`,{credentials:"include"})).json(),l=async e=>(await fetch(`${s}/testimonials/${e}`,{credentials:"include"})).json(),o=async e=>{let t=new FormData;return t.append("title",e.title),t.append("description",e.description),e.categories.forEach(e=>{t.append("categories",e)}),t.append("type",e.type),t.append("order",e.order),"image"==e.type&&e.testimonialPhoto&&e.testimonialPhoto.length>0&&t.append("file",e.testimonialPhoto[0]),"video"==e.type&&(e.testimonialVideo&&e.testimonialVideo.length>0&&t.append("video",e.testimonialVideo[0]),e.testimonialVideoPoster&&e.testimonialVideoPoster.length>0&&t.append("videoPoster",e.testimonialVideoPoster[0])),(await fetch(`${s}/testimonials/create`,{method:"POST",credentials:"include",body:t})).json()},r=async(e,t)=>{let a=new FormData;return a.append("title",t.title),a.append("description",t.description),t.categories.forEach(e=>{a.append("categories",e)}),a.append("type",t.type),a.append("order",t.order),a.append("slug",t.slug),"image"==t.type&&t.testimonialPhoto&&t.testimonialPhoto.length>0&&a.append("file",t.testimonialPhoto[0]),"video"==t.type&&(t.testimonialVideo&&t.testimonialVideo.length>0&&a.append("video",t.testimonialVideo[0]),t.testimonialVideoPoster&&t.testimonialVideoPoster.length>0&&a.append("videoPoster",t.testimonialVideoPoster[0])),(await fetch(`${s}/testimonials/update/${e}`,{method:"PUT",credentials:"include",body:a})).json()},n=async e=>(await fetch(`${s}/testimonials/delete/${e}`,{method:"DELETE",credentials:"include"})).json()}};