"use strict";exports.id=1177,exports.ids=[1177],exports.modules={28960:(e,a,t)=>{t.d(a,{A:()=>p});var s=t(60687),r=t(43210),l=t(27605),i=t(44834),n=t(86898),o=t(85814),c=t.n(o),d=t(74189),m=t(8222);let p=({initialData:e,onSubmit:a,isSubmitting:t})=>{let{register:o,handleSubmit:p,setError:h,control:u,reset:g,getValues:x,setValue:j,formState:{errors:f}}=(0,l.mN)({defaultValues:e||{name:"",categories:"",title:"",profilePhoto:null,image:"",order:"0",slug:"",description:"",metaTitle:"",metaDescription:""}}),[b,N]=(0,r.useState)(""),[y,w]=(0,r.useState)(null),[v,$]=(0,r.useState)([]);return(0,r.useEffect)(()=>{(0,n.bW)(1,1e3).then(e=>{e.error?m.oR.error(e.error):e.data&&e.data.length>0?$(e.data.map(e=>({value:e._id,label:e.name}))):h("categories",{type:"manual",message:"No categories were added in News type"})})},[]),(0,r.useEffect)(()=>{j("description",b)},[b]),(0,r.useEffect)(()=>{e&&e.description&&N(e.description)},[]),(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("form",{onSubmit:p(e=>{a(e)}),encType:"multipart/form-data",children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"categories",className:"form-label",children:"Category *"}),v.length>0&&(0,s.jsx)(l.xI,{name:"categories",control:u,rules:{required:"category is required"},render:({field:e})=>(0,s.jsx)(i.Ay,{...e,options:v,isMulti:!0,isClearable:!0,value:v.filter(a=>e.value?.includes(a.value)),onChange:a=>e.onChange(a.map(e=>e.value)),isLoading:!v.length,placeholder:"Select Categories"})}),f.categories&&(0,s.jsx)("small",{className:"text-danger",children:f.categories?.message?.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"name",className:"form-label",children:"Author *"}),(0,s.jsx)("input",{type:"text",className:"form-control",...o("name",{required:"Author is required",minLength:{value:3,message:"Must be at least 3 characters"}})}),f.name&&(0,s.jsx)("small",{className:"text-danger",children:f.name?.message?.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title *"}),(0,s.jsx)("input",{type:"text",className:"form-control",...o("title",{required:"Title is required",minLength:{value:3,message:"Must be at least 3 characters"}})}),f.title&&(0,s.jsx)("small",{className:"text-danger",children:f.title?.message?.toString()})]}),e&&""!==e.slug&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"title",className:"form-label",children:"Slug *"}),(0,s.jsx)("input",{type:"text",className:"form-control",...o("slug",{})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"image",className:"form-label",children:"Image *"}),(0,s.jsxs)("div",{className:"btn-main-box",children:[(0,s.jsx)("input",{type:"file",className:"file-input",...o("profilePhoto",{required:!(y||e?.image)&&"Image is required"}),onChange:e=>{let a=e.target.files?.[0];a&&w(URL.createObjectURL(a))}}),(0,s.jsx)("div",{className:"btn-box",children:"Upload Image"})]}),y&&(0,s.jsx)("img",{src:y,alt:"Image Preview",className:"mt-3",width:100}),!y&&e&&e.image&&(0,s.jsx)("img",{src:"http://localhost:8181/"+e.image,alt:"Image Preview",className:"mt-3",width:100}),!y&&f.profilePhoto&&(0,s.jsx)("small",{className:"text-danger",children:f.profilePhoto?.message?.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Description"}),(0,s.jsx)(d.A,{value:x("description"),onChange:N}),f.description&&(0,s.jsx)("small",{className:"text-danger",children:f.description?.message?.toString()})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Order"}),(0,s.jsx)("input",{type:"number",min:"0",className:"form-control",...o("order",{})}),f.order&&(0,s.jsx)("small",{className:"text-danger",children:f.order?.message?.toString()})]}),(0,s.jsx)("div",{className:"row mb-3",children:(0,s.jsxs)("div",{className:"col-md-12",children:[(0,s.jsx)("label",{htmlFor:"metaTitle",className:"form-label",children:"Meta Title *"}),(0,s.jsx)("input",{type:"text",className:"form-control",placeholder:"Meta Title",...o("metaTitle",{required:"Meta Title is required."})}),f.metaTitle&&(0,s.jsx)("p",{className:"text-red-500",children:f.metaTitle?.message?.toString()})]})}),(0,s.jsx)("div",{className:"row mb-3",children:(0,s.jsxs)("div",{className:"col-md-12",children:[(0,s.jsx)("label",{htmlFor:"metaDescription",className:"form-label",children:"Meta Description *"}),(0,s.jsx)("textarea",{className:"form-control",placeholder:"Meta Description",...o("metaDescription",{required:"Meta Description is required."})}),f.metaDescription&&(0,s.jsx)("p",{className:"text-red-500",children:f.metaDescription?.message?.toString()})]})}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:t,children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save"}),(0,s.jsx)(c(),{className:"btn btn-outline-secondary ml-2",href:"/admin/news/",children:"Cancel"})]})})}},41026:(e,a,t)=>{t.d(a,{Q4:()=>i,U5:()=>l,aE:()=>r,rD:()=>o,zG:()=>n});let s="http://localhost:8181/api",r=async(e,a,t,r,l)=>(await fetch(s+`/news?search=${e}&page=${a}&limit=${t}&sortColumn=${r}&sortOrder=${l}`,{credentials:"include"})).json(),l=async e=>(await fetch(`${s}/news/${e}`,{credentials:"include"})).json(),i=async e=>{let a=new FormData;return a.append("name",e.name),a.append("title",e.title),e.categories.forEach(e=>{a.append("categories",e)}),a.append("order",e.order),a.append("description",e.description),a.append("metaTitle",e.metaTitle),a.append("metaDescription",e.metaDescription),e.profilePhoto&&e.profilePhoto.length>0&&a.append("file",e.profilePhoto[0]),(await fetch(`${s}/news/create`,{method:"POST",credentials:"include",body:a})).json()},n=async(e,a)=>{let t=new FormData;return t.append("name",a.name),t.append("title",a.title),a.categories.forEach(e=>{t.append("categories",e)}),t.append("order",a.order),t.append("slug",a.slug),t.append("description",a.description),t.append("metaTitle",a.metaTitle),t.append("metaDescription",a.metaDescription),a.profilePhoto&&a.profilePhoto.length>0&&t.append("file",a.profilePhoto[0]),(await fetch(`${s}/news/update/${e}`,{method:"PUT",credentials:"include",body:t})).json()},o=async e=>(await fetch(`${s}/news/delete/${e}`,{method:"DELETE",credentials:"include"})).json()},74189:(e,a,t)=>{t.d(a,{A:()=>l});var s=t(60687),r=t(43210);function l({value:e,onChange:a}){let t=(0,r.useRef)(null);return(0,s.jsx)("textarea",{id:"editor",ref:t,defaultValue:e})}},86898:(e,a,t)=>{t.d(a,{$s:()=>l,K7:()=>o,bW:()=>r,st:()=>n,zZ:()=>i});let s="http://localhost:8181/api",r=async(e,a,t,r,l)=>(await fetch(s+`/news-category?search=${e}&page=${a}&limit=${t}&sortColumn=${r}&sortOrder=${l}`,{credentials:"include"})).json(),l=async e=>(await fetch(`${s}/news-category/${e}`,{credentials:"include"})).json(),i=async e=>{let a=new FormData;return a.append("name",e.name),a.append("order",e.order),a.append("description",e.description),(await fetch(`${s}/news-category/create`,{method:"POST",credentials:"include",body:a})).json()},n=async(e,a)=>{let t=new FormData;return t.append("name",a.name),t.append("order",a.order),t.append("description",a.description),(await fetch(`${s}/news-category/update/${e}`,{method:"PUT",credentials:"include",body:t})).json()},o=async e=>(await fetch(`${s}/news-category/delete/${e}`,{method:"DELETE",credentials:"include"})).json()}};