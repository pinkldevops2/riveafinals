(()=>{var e={};e.id=2031,e.ids=[2031],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6071:(e,a,r)=>{"use strict";r.d(a,{Ob:()=>n,X1:()=>i,cV:()=>d,x3:()=>t,z0:()=>l});let s="http://localhost:8181/api",t=async(e,a,r,t)=>(await fetch(s+`/gallery?page=${e}&limit=${a}&sortColumn=${r}&sortOrder=${t}`,{credentials:"include"})).json(),l=async e=>(await fetch(`${s}/gallery/${e}`,{credentials:"include"})).json(),i=async e=>{let a=new FormData;return a.append("type",e.type),a.append("order",e.order),"image"==e.type&&e.galleryPhoto&&e.galleryPhoto.length>0&&a.append("file",e.galleryPhoto[0]),"video"==e.type&&(e.galleryVideo&&e.galleryVideo.length>0&&a.append("video",e.galleryVideo[0]),e.galleryVideoPoster&&e.galleryVideoPoster.length>0&&a.append("videoPoster",e.galleryVideoPoster[0])),(await fetch(`${s}/gallery/create`,{method:"POST",credentials:"include",body:a})).json()},n=async(e,a)=>{let r=new FormData;return r.append("type",a.type),r.append("order",a.order),console.log("-11->",a),"image"==a.type&&a.galleryPhoto&&a.galleryPhoto.length>0&&r.append("file",a.galleryPhoto[0]),"video"==a.type&&(a.galleryVideo&&a.galleryVideo.length>0&&r.append("video",a.galleryVideo[0]),a.galleryVideoPoster&&a.galleryVideoPoster.length>0&&r.append("videoPoster",a.galleryVideoPoster[0])),(await fetch(`${s}/gallery/update/${e}`,{method:"PUT",credentials:"include",body:r})).json()},d=async e=>(await fetch(`${s}/gallery/delete/${e}`,{method:"DELETE",credentials:"include"})).json()},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},17293:(e,a,r)=>{Promise.resolve().then(r.bind(r,96655))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36576:(e,a,r)=>{"use strict";r.d(a,{A:()=>c});var s=r(60687),t=r(27605),l=r(43210),i=r(44834),n=r(85814),d=r.n(n);let o="http://localhost:8181",c=({initialData:e,onSubmit:a,isSubmitting:r})=>{let{register:n,handleSubmit:c,setError:m,control:p,reset:u,formState:{errors:g}}=(0,t.mN)({defaultValues:e||{type:"",galleryPhoto:null,galleryVideo:null,galleryVideoPoster:null,image:"",video:"",videoPoster:"",order:"0"}}),h=[{value:"image",label:"Image"},{value:"video",label:"Video"}],[x,y]=(0,l.useState)(null),[v,j]=(0,l.useState)(null),[b,f]=(0,l.useState)(null),[P,N]=(0,l.useState)(e?.type||"image"),w=e=>{let a=e.target.files?.[0];if(a){let r=e.target.name,s=URL.createObjectURL(a);"galleryPhoto"==r&&y(s),"galleryVideoPoster"==r&&f(s)}},V=e=>a=>{e(a?.value??null),N(a?.value)};return(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("form",{onSubmit:c(e=>{a(e)}),encType:"multipart/form-data",children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"type",className:"form-label",children:"Type *"}),(0,s.jsx)(t.xI,{name:"type",control:p,rules:{required:"Type is required"},render:({field:e})=>(0,s.jsx)(i.Ay,{...e,options:h,value:h.find(a=>a.value===e.value)||null,onChange:V(e.onChange),placeholder:"Select Type"})}),g.type&&(0,s.jsx)("small",{className:"text-danger",children:g.type?.message?.toString()})]}),"image"==P&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"image",className:"form-label",children:"Image *"}),(0,s.jsxs)("div",{className:"btn-main-box",children:[(0,s.jsx)("input",{type:"file",className:"file-input",...n("galleryPhoto",{required:!(x||e?.image)&&"Image is required"}),onChange:w}),(0,s.jsx)("div",{className:"btn-box",children:"Upload Image"})]}),x&&(0,s.jsx)("img",{src:x,alt:"Image Preview",className:"mt-3",width:100}),!x&&e&&e.image&&(0,s.jsx)("img",{src:o+"/"+e.image,alt:"Image Preview",className:"mt-3",width:100}),!x&&g.galleryPhoto&&(0,s.jsx)("small",{className:"text-danger",children:g.galleryPhoto?.message?.toString()})]}),(0,s.jsxs)("div",{className:"row",children:["video"==P&&(0,s.jsxs)("div",{className:"mb-3 col-md-4",children:[(0,s.jsx)("label",{className:"form-label",children:"Video"}),(0,s.jsxs)("div",{className:"btn-main-box",children:[(0,s.jsx)("input",{type:"file",className:"file-input",accept:"video/*",...n("galleryVideo",{required:!(v||e?.video)&&"Video is required"}),onChange:e=>{let a=e.target.files?.[0];a&&j(URL.createObjectURL(a))}}),(0,s.jsx)("div",{className:"btn-box",children:"Upload Video"})]}),v&&(0,s.jsx)("div",{className:"video-preview mt-3",children:(0,s.jsx)("video",{src:v,controls:!0,width:320,height:240,className:"rounded shadow-md"})}),!v&&e&&e.video&&(0,s.jsx)("div",{className:"video-preview mt-3",children:(0,s.jsx)("video",{src:o+"/"+e.video,controls:!0,width:320,height:240,className:"rounded shadow-md"})}),!v&&g.galleryVideo&&(0,s.jsx)("small",{className:"text-danger",children:g.galleryVideo?.message?.toString()})]}),"video"==P&&(0,s.jsxs)("div",{className:"mb-3 col-md-4",children:[(0,s.jsx)("label",{className:"form-label",children:"Poster Image"}),(0,s.jsxs)("div",{className:"btn-main-box",children:[(0,s.jsx)("input",{type:"file",className:"file-input",...n("galleryVideoPoster",{required:!(b||e?.videoPoster)&&"Poster is required"}),onChange:w}),(0,s.jsx)("div",{className:"btn-box",children:"Upload Image"})]}),b&&(0,s.jsx)("img",{src:b,alt:"Poster Preview",className:"mt-3",width:100}),!b&&e&&e.videoPoster&&(0,s.jsx)("img",{src:o+"/"+e.videoPoster,alt:"Poster Preview",className:"mt-3",width:100}),!b&&g.galleryVideoPoster&&(0,s.jsx)("small",{className:"text-danger",children:g.galleryVideoPoster?.message?.toString()})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Order"}),(0,s.jsx)("input",{type:"number",min:"0",className:"form-control",...n("order",{})}),g.order&&(0,s.jsx)("small",{className:"text-danger",children:g.order?.message?.toString()})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:r,children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save"}),(0,s.jsx)(d(),{className:"btn btn-outline-secondary ml-2",href:"/admin/gallery/",children:"Cancel"})]})})}},54805:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o});var s=r(65239),t=r(48088),l=r(88170),i=r.n(l),n=r(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(a,d);let o={children:["",{children:["admin",{children:["gallery",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,96655)),"D:\\nextjsapps\\riveagit\\src\\app\\admin\\gallery\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"D:\\nextjsapps\\riveagit\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"D:\\nextjsapps\\riveagit\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["D:\\nextjsapps\\riveagit\\src\\app\\admin\\gallery\\[id]\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/admin/gallery/[id]/page",pathname:"/admin/gallery/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79551:e=>{"use strict";e.exports=require("url")},92865:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>p});var s=r(60687),t=r(43210),l=r(16189);r(63787);var i=r(75073),n=r(84840),d=r(72998),o=r(6071),c=r(36576),m=r(8222);function p(){let[e,a]=(0,t.useState)(null),r=(0,l.useRouter)(),[p,u]=(0,t.useState)(null),[g,h]=(0,t.useState)(!0),[x,y]=(0,t.useState)(!1),[v,j]=(0,t.useState)(null),{id:b}=(0,l.useParams)(),f=async e=>{try{y(!0),j(null),await (0,o.Ob)(b,e);let a=await (0,o.z0)(b);u(a.data),m.oR.success("Gallery image updated successfully."),r.push("/admin/gallery")}catch(e){j(e.message||"Failed to update gallery image"),console.error(e)}finally{y(!1)}};return g?(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"d-flex justify-content-center my-5",children:(0,s.jsx)("div",{className:"spinner-border",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}):(0,s.jsxs)("div",{id:"wrapper",children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("div",{id:"content-wrapper",className:"d-flex flex-column",children:(0,s.jsxs)("div",{id:"content",children:[(0,s.jsx)(d.A,{}),(0,s.jsxs)("div",{className:"container-fluid",children:[(0,s.jsx)("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:(0,s.jsxs)("h1",{className:"h3",children:[" Edit Gallery: ",p?.name]})}),(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-xl-12 col-md-12 mb-12",children:(0,s.jsx)("div",{className:"card border-left-primary shadow h-100 py-2",children:(0,s.jsx)("div",{className:"card-body",children:(0,s.jsx)(c.A,{initialData:p,onSubmit:f,isSubmitting:x})})})})})]}),(0,s.jsx)(n.A,{})]})})]})}},96655:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\nextjsapps\\\\riveagit\\\\src\\\\app\\\\admin\\\\gallery\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\nextjsapps\\riveagit\\src\\app\\admin\\gallery\\[id]\\page.tsx","default")},98733:(e,a,r)=>{Promise.resolve().then(r.bind(r,92865))}};var a=require("../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),s=a.X(0,[4447,7252,7934,3481,7605,6354,3948],()=>r(54805));module.exports=s})();